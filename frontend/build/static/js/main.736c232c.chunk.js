(this.webpackJsonpletsplank=this.webpackJsonpletsplank||[]).push([[0],{16:function(e,t,n){e.exports=n(27)},21:function(e,t,n){},22:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(11),o=n.n(i),c=(n(21),n(22),n(23),n(1)),u=n(7),l=[];var s,d,f={clientId:"585215768320-6mpak3k27vfsa2ljulfed020ujaidl2t.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid"},m=Object(r.createContext)({isGoogleApiReady:!1}),p=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],i=function(e){var t=Object(r.useState)({loaded:!1,error:!1}),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){if(!l.includes(e)){l.push(e);var t=document.createElement("script");t.src=e,t.async=!0;var n=function(){i({loaded:!0,error:!1})},r=function(){var n=l.indexOf(e);n>=0&&l.splice(n,1),t.remove(),i({loaded:!0,error:!0})};return t.addEventListener("load",n),t.addEventListener("error",r),document.body.appendChild(t),function(){t.removeEventListener("load",n),t.removeEventListener("error",r)}}i({loaded:!0,error:!1})}),[e]),[a.loaded,a.error]}("https://apis.google.com/js/platform.js"),o=Object(c.a)(i,1)[0];return Object(r.useEffect)((function(){if(o){var e=window.gapi;e.load("client:auth2",(function(){var t=e.auth2.init(f).then((function(){console.log("authentication loaded")})),n=e.client.init(f).then((function(){console.log("client loaded",window.gapi.client.drive)})),r=e.client.load("drive","v3");Promise.all([t,n,r]).then((function(){return a(!0)}))}))}}),[o]),{isGoogleApiReady:n}},g=function(e){var t=e.children,n=p();return a.a.createElement(m.Provider,{value:n},t)},h=function(){return Object(r.useContext)(m)},v=n(15),b=n(2),E=n.n(b),O=n(5),j=Object(r.createContext)({isUserAuthenticated:!1}),w=function(e){var t=e.children,n=function(){var e=h(),t=e.isGoogleApiReady,n=Object(r.useState)(!1),a=Object(c.a)(n,2),i=a[0],o=a[1],u=Object(r.useState)(),l=Object(c.a)(u,2),s=l[0],d=l[1],f=function(){var e=gapi.auth2.getAuthInstance(),t=e.isSignedIn.get();if(o(t),t){var n=e.currentUser.get().getBasicProfile(),r={name:n.getName(),firstName:n.getGivenName(),lastName:n.getFamilyName(),profilePhotoUrl:n.getImageUrl(),email:n.getEmail(),id:n.getId()};return d(r),r}},m=function(){var e=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.gapi.auth2.getAuthInstance().signIn().then(f));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t&&!i&&f()}),[t,i]),Object(v.a)({},e,{isUserAuthenticated:i,userProfile:s,signIn:m,signOut:function(){window.gapi.auth2.getAuthInstance().signOut().then((function(){d(void 0),o(!1)}))}})}();return a.a.createElement(j.Provider,{value:n},t)},x=function(){return Object(r.useContext)(j)};!function(e){e.Initial="initial",e.Running="running",e.Finished="finished"}(d||(d={}));var k=function(){var e=x(),t=e.isUserAuthenticated,n=e.userProfile,i=Object(r.useState)(d.Initial),o=Object(c.a)(i,2),l=o[0],f=o[1],m=Object(r.useState)(0),p=Object(c.a)(m,2),g=p[0],h=p[1];return a.a.createElement("div",null,l===d.Initial&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,Object(u.a)(g,"mm:ss")),a.a.createElement("button",{onClick:function(){f(d.Running);var e=Date.now();s=window.setInterval((function(){h(Date.now()-e)}),1)}},"start")),l===d.Running&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,Object(u.a)(g,"mm:ss")),a.a.createElement("button",{onClick:function(){f(d.Finished),clearInterval(s)}},"stop")),l===d.Finished&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,Object(u.a)(g,"mm:ss")),t?a.a.createElement("button",{onClick:function(){n&&fetch("/plank",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({userId:n.id,durationMS:g})}).then(console.log)}},"submit"):a.a.createElement("span",null,"please authenticate to submit score")))},y=n(3),I=n(4);function S(){var e=Object(y.a)(["\n  position: absolute;\n  right: 0;\n  top: 100%;\n  margin-top: 4px;\n  background-color: white;\n  border-radius: 8px;\n  padding: 5px;\n  z-index: 1;\n  box-shadow: 0px 2px 5px 2px rgba(222, 218, 222, 1);\n"]);return S=function(){return e},e}function P(){var e=Object(y.a)(["\n  font-family: monospace;\n  margin-left: 8px;\n  margin-right: 4px;\n"]);return P=function(){return e},e}function A(){var e=Object(y.a)(["\n  border-radius: 8px;\n  width: 32px;\n  height: 32px;\n"]);return A=function(){return e},e}function C(){var e=Object(y.a)(["\n  background-color: white;\n  padding: 4px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n"]);return C=function(){return e},e}var N=I.a.div(C()),U=I.a.img(A()),F=I.a.span(P()),L=I.a.div(S()),R=function(e){var t=e.profilePhotoUrl,n=e.firstName,i=e.signOut,o=Object(r.useState)(!1),u=Object(c.a)(o,2),l=u[0],s=u[1],d=Object(r.useRef)();return function(e,t){Object(r.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(d,(function(){return s(!1)})),a.a.createElement(a.a.Fragment,null,a.a.createElement(N,{ref:d,onClick:function(){return s(!0)}},a.a.createElement(U,{src:t}),a.a.createElement(F,null,n),l&&a.a.createElement(L,null,a.a.createElement("button",{onClick:i},"Sign out"))))},G=function(){var e=h().isGoogleApiReady,t=x(),n=t.isUserAuthenticated,i=t.userProfile,o=t.signIn,c=t.signOut;if(Object(r.useEffect)((function(){if(i){var e=i.firstName,t=i.profilePhotoUrl,n=i.id;fetch("/user",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e,profilePhotoUrl:t,id:n})}).then(console.log)}}),[i]),!e)return null;var u=function(){var e=Object(O.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o();case 4:console.log("signed in");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,n?i?a.a.createElement(R,{profilePhotoUrl:i.profilePhotoUrl,firstName:i.firstName,signOut:c}):null:a.a.createElement("button",{onClick:u},"Sign in"))};var J=function(){return a.a.createElement(g,null,a.a.createElement(w,null,a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(G,null),a.a.createElement(k,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.736c232c.chunk.js.map