{"version":3,"sources":["logo.svg","shared/hooks/useScript.tsx","shared/hooks/useGoogleApi.tsx","shared/hooks/useGoogleAuth.tsx","components/Record/Record.tsx","components/Timer/Timer.tsx","shared/colous.ts","components/Profile/Profile.tsx","shared/hooks/useOnClickOutside.ts","components/Logo/Logo.tsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","cachedScripts","gapiAttributes","clientId","scope","googleApiContext","createContext","isGoogleApiReady","useGoogleApiProvider","useState","setIsGoogleApiReady","src","loaded","error","state","setState","useEffect","includes","push","script","document","createElement","async","onScriptLoad","onScriptError","index","indexOf","splice","remove","addEventListener","body","appendChild","removeEventListener","useScript","scriptLoaded","gapi","window","load","authPromise","auth2","init","then","console","log","clientPromise","client","drive","drivePromise","Promise","all","GoogleApiProvider","children","googleApi","Provider","value","useGoogleApi","useContext","googleAuthContext","isUserAuthenticated","GoogleAuthProvider","googleAuth","setIsUserAuthenticated","userProfile","setUserProfile","authenticateUser","getAuthInstance","isSignedIn","get","profile","currentUser","getBasicProfile","name","getName","firstName","getGivenName","lastName","getFamilyName","profilePhotoUrl","getImageUrl","email","getEmail","id","getId","signIn","a","signOut","undefined","useGoogleAuthProvider","useGoogleAuth","timer","State","Row","styled","div","ProgressBar","Title","span","SuccessIcon","Trophy","Column","Record","title","currentRecord","Button","button","Wrapper","Duration","Records","Timer","Initial","timeElapsed","setTimeElapsed","formattedTimeElapsed","format","onClick","Running","startTime","Date","now","setInterval","Finished","clearInterval","fetch","headers","method","JSON","stringify","userId","durationMS","UserProfile","ProfilePicture","img","Menu","ProfileMenu","showMenu","setShowMenu","ref","useRef","handler","listener","event","current","contains","target","useOnClickOutside","Profile","authenticate","Plank","Logo","Header","App","style","padding","className","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.7fe1a314.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import { useState, useEffect } from \"react\";\n\n// Hook\nconst cachedScripts: String[] = [];\n\nexport function useScript(src: string) {\n  // Keeping track of script loaded and error state\n  const [state, setState] = useState({\n    loaded: false,\n    error: false,\n  });\n\n  useEffect(\n    () => {\n      // If cachedScripts array already includes src that means another instance ...\n      // ... of this hook already loaded this script, so no need to load again.\n      if (cachedScripts.includes(src)) {\n        setState({\n          loaded: true,\n          error: false,\n        });\n      } else {\n        cachedScripts.push(src);\n\n        // Create script\n        const script = document.createElement(\"script\");\n        script.src = src;\n        script.async = true;\n\n        // Script event listener callbacks for load and error\n        const onScriptLoad = () => {\n          setState({\n            loaded: true,\n            error: false,\n          });\n        };\n\n        const onScriptError = () => {\n          // Remove from cachedScripts we can try loading again\n          const index = cachedScripts.indexOf(src);\n          if (index >= 0) cachedScripts.splice(index, 1);\n          script.remove();\n\n          setState({\n            loaded: true,\n            error: true,\n          });\n        };\n\n        script.addEventListener(\"load\", onScriptLoad);\n        script.addEventListener(\"error\", onScriptError);\n\n        // Add script to document body\n        document.body.appendChild(script);\n\n        // Remove event listeners on cleanup\n        return () => {\n          script.removeEventListener(\"load\", onScriptLoad);\n          script.removeEventListener(\"error\", onScriptError);\n        };\n      }\n    },\n    [src] // Only re-run effect if script src changes\n  );\n\n  return [state.loaded, state.error];\n}\n","import React, { useState, useEffect, useContext, createContext } from \"react\";\n\nimport { useScript } from \"./useScript\";\n\nconst gapiAttributes = {\n  clientId:\n    \"585215768320-6mpak3k27vfsa2ljulfed020ujaidl2t.apps.googleusercontent.com\",\n  scope:\n    \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid\",\n  // discoveryDocs: [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"],\n};\n\nconst googleApiContext = createContext<GoogleApi>({\n  isGoogleApiReady: false,\n});\n\nconst useGoogleApiProvider = () => {\n  const [isGoogleApiReady, setIsGoogleApiReady] = useState(false);\n  const [scriptLoaded] = useScript(\"https://apis.google.com/js/platform.js\");\n\n  useEffect(() => {\n    if (scriptLoaded) {\n      const { gapi } = window;\n\n      // @TODO move these to their corresponding providers\n      gapi.load(\"client:auth2\", () => {\n        // @ts-ignore\n        const authPromise = gapi.auth2.init(gapiAttributes).then(() => {\n          console.log(\"authentication loaded\");\n        });\n        const clientPromise = gapi.client.init(gapiAttributes).then(() => {\n          console.log(\"client loaded\", window.gapi.client.drive);\n        });\n        const drivePromise = gapi.client.load(\"drive\", \"v3\");\n\n        Promise.all([authPromise, clientPromise, drivePromise]).then(() =>\n          setIsGoogleApiReady(true)\n        );\n      });\n    }\n  }, [scriptLoaded]);\n\n  return {\n    isGoogleApiReady,\n  };\n};\n\nexport const GoogleApiProvider = ({\n  children,\n}: {\n  children: JSX.Element | JSX.Element[];\n}) => {\n  const googleApi = useGoogleApiProvider();\n  return (\n    <googleApiContext.Provider value={googleApi}>\n      {children}\n    </googleApiContext.Provider>\n  );\n};\n\ninterface GoogleApi {\n  isGoogleApiReady: boolean;\n}\n\nexport const useGoogleApi = () => {\n  return useContext<GoogleApi>(googleApiContext);\n};\n","import React, { useState, useEffect, useContext, createContext } from \"react\";\n\nimport { useGoogleApi } from \"./useGoogleApi\";\n\ninterface UserProfile {\n  name: string;\n  firstName: string;\n  lastName: string;\n  profilePhotoUrl: string;\n  email: string;\n  id: string;\n}\n\ninterface GoogleAuth {\n  signIn?: () => Promise<UserProfile | undefined>;\n  signOut?: () => void;\n  userProfile?: UserProfile;\n  isUserAuthenticated: boolean;\n}\n\nconst googleAuthContext = createContext<GoogleAuth>({\n  isUserAuthenticated: false,\n});\n\nconst useGoogleAuthProvider = () => {\n  const googleApi = useGoogleApi();\n  const { isGoogleApiReady } = googleApi;\n  const [isUserAuthenticated, setIsUserAuthenticated] = useState(false);\n  const [userProfile, setUserProfile] = useState<UserProfile>();\n\n  const authenticateUser = () => {\n    const auth2 = gapi.auth2.getAuthInstance();\n    const isSignedIn = auth2.isSignedIn.get();\n    setIsUserAuthenticated(isSignedIn);\n\n    if (!isSignedIn) {\n      return;\n    }\n\n    const user = auth2.currentUser.get();\n    const profile = user.getBasicProfile();\n\n    const userProfile: UserProfile = {\n      name: profile.getName(),\n      firstName: profile.getGivenName(),\n      lastName: profile.getFamilyName(),\n      profilePhotoUrl: profile.getImageUrl(),\n      email: profile.getEmail(),\n      id: profile.getId(),\n    };\n    setUserProfile(userProfile);\n    return userProfile;\n  };\n\n  const signIn = async () =>\n    window.gapi.auth2.getAuthInstance().signIn().then(authenticateUser);\n\n  const signOut = () => {\n    window.gapi.auth2\n      .getAuthInstance()\n      .signOut()\n      .then(() => {\n        setUserProfile(undefined);\n        setIsUserAuthenticated(false);\n      });\n  };\n\n  useEffect(() => {\n    if (isGoogleApiReady && !isUserAuthenticated) {\n      authenticateUser();\n    }\n  }, [isGoogleApiReady, isUserAuthenticated]);\n\n  const googleAuth: GoogleAuth = {\n    ...googleApi,\n    isUserAuthenticated,\n    userProfile,\n    signIn,\n    signOut,\n  };\n\n  return googleAuth;\n};\n\nexport const GoogleAuthProvider = ({\n  children,\n}: {\n  children: JSX.Element | JSX.Element[];\n}) => {\n  const googleAuth = useGoogleAuthProvider();\n  return (\n    <googleAuthContext.Provider value={googleAuth}>\n      {children}\n    </googleAuthContext.Provider>\n  );\n};\n\nexport const useGoogleAuth = () => {\n  return useContext<GoogleAuth>(googleAuthContext);\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Trophy } from \"@styled-icons/entypo/Trophy\";\n\nimport { primary, secondary } from \"../../shared/colous\";\n\nconst Row = styled.div`\n  background-color: #f3f3f3;\n  border-radius: 5px;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  height: 5px;\n  background-color: ${primary};\n  border-radius: 4px;\n`;\n\nconst Title = styled.span`\n  margin-bottom: 5px;\n  font-family: Questrial;\n  color: ${primary};\n  font-size: 13px;\n`;\n\ninterface RecordProps {\n  title: string;\n  currentRecord: string;\n}\n\nconst SuccessIcon = styled(Trophy)`\n  color: ${secondary};\n  width: 25px;\n  height: 25px;\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  margin-right: 5px;\n`;\n\nexport const Record = ({ title, currentRecord }: RecordProps) => (\n  <Row>\n    <Column>\n      <Title>\n        {title}\n        <b>{\" \" + currentRecord}</b>\n      </Title>\n      <ProgressBar />\n    </Column>\n    <SuccessIcon />\n  </Row>\n);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport format from \"date-fns/format\";\nimport { useGoogleAuth } from \"../../shared/hooks\";\nimport { secondary } from \"../../shared/colous\";\nimport { Record } from \"../Record\";\n\nlet timer: number;\n\nenum State {\n  Initial = \"initial\",\n  Running = \"running\",\n  Finished = \"finished\",\n}\n\nconst Button = styled.button`\n  width: 100%;\n  border-radius: 5px;\n  padding: 10px;\n  color: white;\n  font-family: Questrial;\n  background-color: ${secondary};\n  font-size: 20px;\n  border: none;\n`;\n\nconst Wrapper = styled.div`\n  width: 100%;\n`;\n\nconst Duration = styled.div`\n  border-radius: 100px;\n  bodrder: 2px solid;\n  text-align: center;\n  font-size: 70px;\n  font-family: Questrial;\n  margin: 0;\n  margin-bottom: 10px;\n`;\n\nconst Records = styled.div`\n  > * {\n    margin-bottom: 8px;\n  }\n`;\n\nexport const Timer = () => {\n  const { isUserAuthenticated, userProfile } = useGoogleAuth();\n  const [state, setState] = useState(State.Initial);\n  const [timeElapsed, setTimeElapsed] = useState(0);\n\n  const startTimer = () => {\n    setState(State.Running);\n    const startTime = Date.now();\n    timer = window.setInterval(() => {\n      setTimeElapsed(Date.now() - startTime);\n    }, 10);\n  };\n\n  const stopTimer = () => {\n    setState(State.Finished);\n    clearInterval(timer);\n  };\n\n  const submitResult = () => {\n    if (!userProfile) {\n      return;\n    }\n\n    fetch(\"/plank\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      method: \"POST\",\n      body: JSON.stringify({ userId: userProfile.id, durationMS: timeElapsed }),\n    }).then(console.log);\n  };\n\n  const formattedTimeElapsed = format(timeElapsed, \"mm:ss:SS\");\n\n  return (\n    <Wrapper>\n      <Records>\n        <Record\n          title=\"Personal Best\"\n          currentRecord={format(5000, \"mm:ss:SS\")}\n        />\n        <Record\n          title=\"Weekly Leaderboard Best\"\n          currentRecord={format(10000, \"mm:ss:SS\")}\n        />\n        <Record\n          title=\"All Time Leaderboard Best\"\n          currentRecord={format(30000, \"mm:ss:SS\")}\n        />\n      </Records>\n      <br />\n      {state === State.Initial && (\n        <>\n          <Duration>{formattedTimeElapsed}</Duration>\n          <Button onClick={startTimer}>Start</Button>\n        </>\n      )}\n      {state === State.Running && (\n        <>\n          <Duration>{formattedTimeElapsed}</Duration>\n          <Button onClick={stopTimer}>Stop</Button>\n        </>\n      )}\n      {state === State.Finished && (\n        <>\n          <Duration>{formattedTimeElapsed}</Duration>\n          {isUserAuthenticated ? (\n            <Button onClick={submitResult}>Submit</Button>\n          ) : (\n            <span>Please authenticate to submit score</span>\n          )}\n        </>\n      )}\n    </Wrapper>\n  );\n};\n","export const primary = \"#01062a\";\nexport const secondary = \"#f51b28\";\n// export const secondary = \"#f72b13\";\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { useGoogleApi } from \"../../shared/hooks/useGoogleApi\";\nimport { useOnClickOutside } from \"../../shared/hooks/useOnClickOutside\";\nimport { useGoogleAuth } from \"../../shared/hooks\";\n\nconst UserProfile = styled.div`\n  background-color: rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n`;\n\nconst ProfilePicture = styled.img`\n  border-radius: 8px;\n  width: 50px;\n  height: 50px;\n`;\n\nconst UserName = styled.span`\n  color: white;\n  font-family: monospace;\n  margin-left: 8px;\n  margin-right: 4px;\n  color: white;\n  font-family: Questrial;\n`;\n\ninterface ProfileMenuProps {\n  profilePhotoUrl: string;\n  firstName: string;\n  signOut: (() => void) | undefined;\n}\n\nconst Menu = styled.div`\n  color: white;\n  position: absolute;\n  right: 0;\n  top: 100%;\n  margin-top: 4px;\n  background-color: #1a1f40;\n  border-radius: 8px;\n  padding: 5px 10px;\n  z-index: 1;\n`;\n\nconst Button = styled.button`\n  color: white;\n  display: flex;\n  width: 100%;\n  white-space: nowrap;\n  border: none;\n  background-color: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n  padding: 5px 10px;\n`;\n\nconst ProfileMenu = ({\n  profilePhotoUrl,\n  firstName,\n  signOut,\n}: ProfileMenuProps) => {\n  const [showMenu, setShowMenu] = useState(false);\n  const ref = useRef() as React.MutableRefObject<HTMLElement>;\n  useOnClickOutside(ref, () => setShowMenu(false));\n\n  return (\n    <>\n      <UserProfile\n        // @ts-ignore\n        ref={ref}\n        onClick={() => setShowMenu(true)}\n      >\n        <ProfilePicture src={profilePhotoUrl} />\n        {/* <UserName>{firstName}</UserName> */}\n        {showMenu && (\n          <Menu>\n            <Button onClick={signOut}>Sign out</Button>\n          </Menu>\n        )}\n      </UserProfile>\n    </>\n  );\n};\n\nexport const Profile = () => {\n  const { isGoogleApiReady } = useGoogleApi();\n  const { isUserAuthenticated, userProfile, signIn, signOut } = useGoogleAuth();\n\n  useEffect(() => {\n    if (!userProfile) {\n      return;\n    }\n\n    const { firstName: name, profilePhotoUrl, id } = userProfile;\n    fetch(\"/user\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      method: \"POST\",\n      body: JSON.stringify({ name, profilePhotoUrl, id }),\n    }).then(console.log);\n  }, [userProfile]);\n\n  if (!isGoogleApiReady) {\n    // console.log({ isGoogleApiReady });\n    return null;\n  }\n\n  const authenticate = async () => {\n    if (!signIn) {\n      return;\n    }\n    await signIn();\n    console.log(\"signed in\");\n  };\n\n  return (\n    <>\n      {isUserAuthenticated ? (\n        !userProfile ? null : (\n          <ProfileMenu\n            profilePhotoUrl={userProfile.profilePhotoUrl}\n            firstName={userProfile.firstName}\n            signOut={signOut}\n          />\n        )\n      ) : (\n        <button onClick={authenticate}>Sign in</button>\n      )}\n    </>\n  );\n};\n","import { useEffect } from \"react\";\n\n// https://usehooks.com/useOnClickOutside/\n\n// @ts-ignore\nexport const useOnClickOutside = (ref, handler) => {\n  useEffect(\n    () => {\n      // @ts-ignore\n      const listener = (event) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return;\n        }\n\n        handler(event);\n      };\n\n      document.addEventListener(\"mousedown\", listener);\n      document.addEventListener(\"touchstart\", listener);\n\n      return () => {\n        document.removeEventListener(\"mousedown\", listener);\n        document.removeEventListener(\"touchstart\", listener);\n      };\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]\n  );\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { primary, secondary } from \"../../shared/colous\";\n\nconst Plank = styled.div`\n  font-family: Questrial;\n  color: white;\n  border-bottom: 2px solid ${secondary};\n  transform: rotate(-10deg);\n  padding-right: 4px;\n  padding-bottom: 4px;\n  &::before {\n    position: absolute;\n    content: \"\";\n    border-radius: 100px;\n    width: 10px;\n    height: 10px;\n    background-color: ${secondary};\n    right: -10px;\n    bottom: -5px;\n  }\n  &::after {\n    border: 2px solid #f51b28;\n    content: \"\";\n    position: absolute;\n    bottom: -16px;\n    width: 8px;\n    height: 13px;\n    border-top: none;\n    border-right: none;\n    transform: rotate(10deg);\n    right: -7px;\n  }\n`;\n\nconst Wrapper = styled.div`\n  background-color: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n  padding: 11px 20px 17px 10px;\n`;\n// const Text = styled.span``;\n\nexport const Logo = () => (\n  <Wrapper>\n    <Plank>LetsPlank</Plank>\n  </Wrapper>\n);\n","import React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { Timer } from \"./components/Timer\";\nimport { Profile } from \"./components/Profile\";\nimport { GoogleApiProvider, GoogleAuthProvider } from \"./shared/hooks\";\nimport { Logo } from \"./components/Logo\";\nimport styled from \"styled-components\";\n\nconst Header = styled.div`\n  display: flex;\n  box-sizing: border-box;\n  padding: 10px 15px;\n  background-color: #01062a;\n  justify-content: space-between;\n  align-items: center;\n  width: 100vw;\n`;\n\nfunction App() {\n  return (\n    <GoogleApiProvider>\n      <GoogleAuthProvider>\n        <Header>\n          <Logo />\n          <Profile />\n        </Header>\n        <br />\n        <br />\n        <div style={{ padding: \"0 20px\" }}>\n          <Timer />\n        </div>\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <br />\n            <br />\n            <br />\n          </header>\n        </div>\n      </GoogleAuthProvider>\n    </GoogleApiProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}